
# Lab 3

## TODO

- [x] –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å nextcloud + postgresql
- [x] –î–ª—è –ø–æ—Å—Ç–≥—Ä–µ—Å–∞ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ POSTGRES_USER –∏ POSTGRES_PASSWORD –∏–∑ –∫–æ–Ω—Ñ–∏–≥–º–∞–ø—ã –≤ —Å–µ–∫—Ä–µ—Ç—ã (–æ—á–µ–≤–∏–¥–Ω–æ, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è
–Ω–æ–≤—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–∏ Secret)
- [x] –î–ª—è –Ω–µ–∫—Å—Ç–∫–ª–∞—É–¥–∞ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –µ–≥–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ( NEXTCLOUD_UPDATE , ALLOW_EMPTY_PASSWORD –∏ –ø—Ä–æ—á.) –∏–∑ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞ –≤
–∫–æ–Ω—Ñ–∏–≥–º–∞–ø—É (–æ—á–µ–≤–∏–¥–Ω–æ, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–æ–≤—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–∏ ConfigMap)
- [x] –î–ª—è –Ω–µ–∫—Å—Ç–∫–ª–∞—É–¥–∞ –¥–æ–±–∞–≤–∏—Ç—å Liveness –∏ Readiness –ø—Ä–æ–±—ã
- [x] –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã

## –°–∫—Ä–∏–Ω—ã

**–ó–∞–ø—É—Å–∫ minikube**

![plot](./k8s/images/minikube_start.png)

**–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä minikube –ø–æ–¥–Ω—è–ª—Å—è**

![plot](./k8s/images/docker_ps.png)

**–ü—Ä–æ–≥–Ω–∞—Ç—å –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã**

![plot](./k8s/images/manifests_creation.png)

**Postgres**

![plot](./k8s/images/postgres_describe.png)


**–ó–∞–ø—É—Å–∫ nextcloud, –ª–æ–≥–∏**

![plot](./k8s/images/running_nextcloud.png)

**–°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**

![plot](./k8s/images/services.png)

### **–í–ê–ñ–ù–û!**

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –Ω–∞ Ubuntu, —Å–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://minikube.sigs.k8s.io/docs/handbook/accessing/#:~:text=Running%20minikube%20on%20Linux%20with%20the%20Docker%20driver%20will%20result%20in%20no%20tunnel%20being%20created.), –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç—É–Ω–Ω–µ–ª–∏, —É –º–µ–Ω—è –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–Ω—É—Ç—å —ç—Ç–æ –Ω–∞ Windows –∏–ª–∏ –Ω–∞ –¥—Ä—É–≥–æ–º –¥—Ä–∞–π–≤–µ—Ä–µ, —è –ø—Ä–æ–≤–µ—Ä–∏–ª —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, –ø–∏–Ω–≥—É—è localhost –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ curl'–æ–º.

## –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã

1. üí° –í–æ–ø—Ä–æ—Å: –≤–∞–∂–µ–Ω –ª–∏ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤? –ü–æ—á–µ–º—É?
> –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ –≤–∞–∂–µ–Ω. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ deployment –º—ã –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ secret —Å–µ—Ä–≤–∏—Å–∞ postgres, –æ–¥–Ω–∞–∫–æ –µ—Å–ª–∏ secret –Ω–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω, —Ç–æ –∏ deployment –Ω–µ —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∫ –Ω–∏–º –¥–æ—Å—Ç—É–ø –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è.

2. üí° –í–æ–ø—Ä–æ—Å: —á—Ç–æ (–∏ –ø–æ—á–µ–º—É) –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –æ—Ç—Å–∫–µ–π–ª–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ postgres-deployment –≤ 0,
–∑–∞—Ç–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ 1, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞ –∑–∞–π—Ç–∏ –Ω–∞ Nextcloud? 
> –ù–µ –ø–æ–ª—É—á–∏—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ nextcloud, –ø–æ—Å–∫–æ–ª—å–∫—É –ø–æ—Å–ª–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø–ª–∏–∫ –≤ 0 –≤ postgres –∫—É–±–µ—Ä —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –ë–î, –º—ã –ø–æ—Ç–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ, –∏–∑-–∑–∞ —á–µ–≥–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ nextcloud –±—É–¥–µ—Ç —Å—Ç—É—á–∞—Ç—å—Å—è —Ç—É–¥–∞, –≥–¥–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç (–Ω–∏–∫–∞–∫–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç)

# containers_project